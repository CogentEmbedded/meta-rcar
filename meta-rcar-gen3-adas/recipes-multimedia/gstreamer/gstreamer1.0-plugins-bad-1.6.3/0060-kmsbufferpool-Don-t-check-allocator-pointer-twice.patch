From c1144cedcbd3479e2c33558d13b4784fa3a93f94 Mon Sep 17 00:00:00 2001
From: Nicolas Dufresne <nicolas.dufresne@collabora.com>
Date: Mon, 11 Sep 2017 16:32:32 -0400
Subject: [PATCH 60/80] kmsbufferpool: Don't check allocator pointer twice

https://bugzilla.gnome.org/show_bug.cgi?id=787593
---
 sys/kms/gstkmsbufferpool.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/sys/kms/gstkmsbufferpool.c b/sys/kms/gstkmsbufferpool.c
index bb9bae3ef..57f032839 100644
--- a/sys/kms/gstkmsbufferpool.c
+++ b/sys/kms/gstkmsbufferpool.c
@@ -87,8 +87,7 @@ gst_kms_buffer_pool_set_config (GstBufferPool * pool, GstStructure * config)
   if (allocator && GST_IS_KMS_ALLOCATOR (allocator)) {
     if (priv->allocator)
       gst_object_unref (priv->allocator);
-    if ((priv->allocator = allocator))
-      gst_object_ref (allocator);
+    priv->allocator = gst_object_ref (allocator);
   }
   if (!priv->allocator)
     goto no_allocator;
-- 
2.11.0

