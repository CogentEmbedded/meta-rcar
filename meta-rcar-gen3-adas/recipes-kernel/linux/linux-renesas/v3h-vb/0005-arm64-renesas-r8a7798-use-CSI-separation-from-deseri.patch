From 338270097a7231677c53484e743d5d58a6e7e406 Mon Sep 17 00:00:00 2001
From: Vladimir Barinov <vladimir.barinov@cogentembedded.com>
Date: Fri, 21 Sep 2018 11:14:56 +0300
Subject: [PATCH] arm64: renesas: r8a7798: use CSI separation from deserializer

Separate CSI0 and CSI1 from deserializer, i.e. disable
deserializer replicate
---
 .../boot/dts/renesas/r8a7798-v3hsk-vb-4ch.dts      | 22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)

diff --git a/arch/arm64/boot/dts/renesas/r8a7798-v3hsk-vb-4ch.dts b/arch/arm64/boot/dts/renesas/r8a7798-v3hsk-vb-4ch.dts
index e0099a6..f74f7ea 100644
--- a/arch/arm64/boot/dts/renesas/r8a7798-v3hsk-vb-4ch.dts
+++ b/arch/arm64/boot/dts/renesas/r8a7798-v3hsk-vb-4ch.dts
@@ -199,7 +199,7 @@
 					ov106xx_in2: endpoint {
 						clock-lanes = <0>;
 						data-lanes = <1 2 3 4>;
-						remote-endpoint = <&vin6ep0>;
+						remote-endpoint = <&vin4ep0>;
 					};
 				};
 				port@1 {
@@ -217,7 +217,7 @@
 					ov106xx_in3: endpoint {
 						clock-lanes = <0>;
 						data-lanes = <1 2 3 4>;
-						remote-endpoint = <&vin7ep0>;
+						remote-endpoint = <&vin5ep0>;
 					};
 				};
 				port@1 {
@@ -236,6 +236,8 @@
 				ti,lanes = <4>;
 				ti,forwarding-mode = "round-robin";
 				ti,cable-mode = "coax";
+				ti,vc-map = <0x1010>;
+				ti,csi1-links = <0 1>;
 				gpios = <&gpio_exp_ch0 13 GPIO_ACTIVE_LOW>;
 				POC0-gpios = <&gpio_exp_ch0 8 GPIO_ACTIVE_HIGH>;
 				POC1-gpios = <&gpio_exp_ch0 9 GPIO_ACTIVE_HIGH>;
@@ -565,7 +567,7 @@
 	};
 };
 
-&vin6 {
+&vin4 {
 	status = "okay";
 
 	ports {
@@ -573,9 +575,9 @@
 		#size-cells = <0>;
 
 		port@0 {
-			vin6ep0: endpoint {
+			vin4ep0: endpoint {
 				csi,select = "csi41";
-				virtual,channel = <2>;
+				virtual,channel = <0>;
 				data-lanes = <1 2 3 4>;
 				remote-endpoint = <&ov106xx_in2>;
 			};
@@ -586,14 +588,14 @@
 			};
 		};
 		port@2 {
-			vin6_ti9x4_des0ep2: endpoint@1 {
+			vin4_ti9x4_des0ep2: endpoint@1 {
 				remote-endpoint = <&ti9x4_des0ep2>;
 			};
 		};
 	};
 };
 
-&vin7 {
+&vin5 {
 	status = "okay";
 
 	ports {
@@ -601,9 +603,9 @@
 		#size-cells = <0>;
 
 		port@0 {
-			vin7ep0: endpoint {
+			vin5ep0: endpoint {
 				csi,select = "csi41";
-				virtual,channel = <3>;
+				virtual,channel = <1>;
 				data-lanes = <1 2 3 4>;
 				remote-endpoint = <&ov106xx_in3>;
 			};
@@ -614,7 +616,7 @@
 			};
 		};
 		port@2 {
-			vin7_ti9x4_des0ep3: endpoint@1 {
+			vin5_ti9x4_des0ep3: endpoint@1 {
 				remote-endpoint = <&ti9x4_des0ep3>;
 			};
 		};
-- 
1.9.1

