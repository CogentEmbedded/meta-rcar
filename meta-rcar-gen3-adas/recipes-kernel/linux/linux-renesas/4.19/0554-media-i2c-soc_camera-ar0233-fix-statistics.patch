From 3a57954f575c21e4ab6f48d42446a7942053fba8 Mon Sep 17 00:00:00 2001
From: Vladimir Barinov <vladimir.barinov@cogentembedded.com>
Date: Tue, 27 Apr 2021 19:41:37 +0300
Subject: [PATCH 1/2] media: i2c: soc_camera: ar0233: fix statistics

This fixes statistics

Signed-off-by: Alexander Ronzhin <alexander.ronzhin@cogentembedded.com>
Signed-off-by: Vladimir Barinov <vladimir.barinov@cogentembedded.com>
---
 drivers/media/i2c/soc_camera/ar0233_rev2.h | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/drivers/media/i2c/soc_camera/ar0233_rev2.h b/drivers/media/i2c/soc_camera/ar0233_rev2.h
index bd4263c..cd441f1 100644
--- a/drivers/media/i2c/soc_camera/ar0233_rev2.h
+++ b/drivers/media/i2c/soc_camera/ar0233_rev2.h
@@ -3441,6 +3441,7 @@ static const struct ar0xxx_reg ar0233_rev2_disable_embed_data_stat[] = {
 {0x3040, 0xC005}, //Embedded stat4 and data4 rows, hflip/vflip=1
 {0x350e, 0x2089}, // bit0 must be set for vflip=1
 {0x3064, 0x0180}, // SMIA_TEST: enable emb data and stats
+{0x306e, 0x90d2},   // datapath_select
 { }
 }; /* disable_embed_data_stat */
 
@@ -3642,7 +3643,7 @@ static const struct ar0xxx_reg *ar0233_regs_hdr_mipi_12bit_30fps_rev2[] = {
 	ar0233_rev2_HDR_3exp_12bit,
 	ar0233_rev2_pll_23_102_4lane_12b,
 	ar0233_rev2_mipi_12bit_4lane,
-	ar0233_rev2_LUT_24_to_12,
+//	ar0233_rev2_LUT_24_to_12,
 	ar0233_rev2_Full_resolution,
 	ar0233_rev2_HDR_ratio_gain_default,
 	NULL,
@@ -3657,7 +3658,7 @@ static const struct ar0xxx_reg *ar0233_regs_seplus_mipi_12bit_30fps_rev2[] = {
 	ar0233_rev2_O1_Recommended_Defaults_SE_T1_LIN_T2,
 	ar0233_rev2_disable_embed_data_stat,
 	ar0233_rev2_SEPLUS_12bit,
-	ar0233_rev2_LUT_24_to_12,
+//	ar0233_rev2_LUT_24_to_12,
 	ar0233_rev2_SEPLUS_ratio_gain_default,
 	NULL,
 };
@@ -3675,7 +3676,7 @@ static const struct ar0xxx_reg *ar0233_regs_seplus_mipi_12bit_60fps_rev2[] = {
 	ar0233_rev2_SE_Pixel_char_Recommended_REV2_V3, // If R0x300E version is earlier than 0x202D, it should be load
 	ar0233_rev2_sequence_hidy_ar0233_REV2_SE_V13, // If R0x300E version is earlier than 0x202D, it should be load
 	ar0233_rev2_SE_Lin_T2_12bit, // ar0233_rev2_SEPLUS_12bit
-	ar0233_rev2_LUT_24_to_12,
+//	ar0233_rev2_LUT_24_to_12,
 	ar0233_rev2_SE_AGain_1x, // ar0233_rev2_SEPLUS_ratio_gain_default,
 	ar0233_rev2_Tempsensor_init,
 	ar0233_rev2_SE_Design_Recommended2,
-- 
2.7.4

